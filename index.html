<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>私と敵のローグ</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="game-wrapper">
    <header id="status-bar">
      <div class="status-item">階: <span id="ui-floor">1F</span></div>
      <div class="status-item">HP: <span id="ui-hp">20 / 20</span></div>
      <div class="status-item">Lv/Exp: <span id="ui-level">1</span> / <span id="ui-exp">0</span></div>
      <div class="status-item">満腹: <span id="ui-hunger">100%</span></div>
      <div class="status-item">攻/防: <span id="ui-atk">1</span> / <span id="ui-def">0</span></div>
      <div class="status-item">所持: <span id="ui-inventory">0 / 20</span></div>
    </header>
    <canvas id="game-canvas" aria-label="ローグライクゲーム" role="img"></canvas>
    <div id="message-log" aria-live="polite"></div>
    <div id="dpad" class="dpad" data-size="full">
      <div class="dpad-inner">
        <button class="pad-btn" data-action="up" aria-label="上">▲</button>
        <div class="pad-row">
          <button class="pad-btn" data-action="left" aria-label="左">◀</button>
          <button class="pad-btn" data-action="wait" aria-label="待機">•</button>
          <button class="pad-btn" data-action="right" aria-label="右">▶</button>
        </div>
        <button class="pad-btn" data-action="down" aria-label="下">▼</button>
      </div>
      <button id="pad-menu" class="pad-menu" aria-label="メニュー">≡</button>
    </div>
    <button id="pad-toggle" class="pad-toggle" data-visibility="full" aria-label="Dパッド切替">🕹</button>
  </div>

  <div id="menu-overlay" class="overlay hidden" role="dialog" aria-modal="true">
    <div class="panel">
      <h2>所持品</h2>
      <ul id="inventory-list"></ul>
      <div class="panel-buttons">
        <button id="close-menu" class="secondary">閉じる</button>
      </div>
    </div>
  </div>

  <div id="result-overlay" class="overlay hidden" role="dialog" aria-modal="true">
    <div class="panel">
      <h2>リザルト</h2>
      <p>到達階: <span id="result-floor">1F</span></p>
      <p>撃破数: <span id="result-kills">0</span></p>
      <p>スコア: <span id="result-score">0</span></p>
      <form id="result-form">
        <label>名前(3文字まで)
          <input id="result-name" maxlength="3" pattern="[A-Za-z0-9ぁ-んァ-ヶ一-龥]{1,3}" required />
        </label>
        <button type="submit" class="primary">ランキング登録</button>
      </form>
      <button id="retry-button" class="primary">再挑戦</button>
      <button id="ranking-button">ランキングを見る</button>
    </div>
  </div>

  <div id="ranking-overlay" class="overlay hidden" role="dialog" aria-modal="true">
    <div class="panel">
      <h2>ランキング</h2>
      <ol id="ranking-list"></ol>
      <div class="panel-buttons">
        <button id="reset-ranking" class="danger">リセット</button>
        <button id="close-ranking" class="secondary">閉じる</button>
      </div>
    </div>
  </div>

  <div id="tutorial" class="overlay" role="dialog" aria-modal="true">
    <div class="panel">
      <h2>遊び方</h2>
      <p>画面下のDパッド、スワイプ、またはキーボード(矢印/WASD/スペース)で行動します。</p>
      <p>1行動ごとに敵も行動します。階段で降りてより深い階層を目指しましょう。</p>
      <button id="tutorial-close" class="primary">開始</button>
    </div>
  </div>

  <div id="toast" class="toast" aria-live="assertive"></div>

  <script src="main.js"></script>
</body>
</html>
